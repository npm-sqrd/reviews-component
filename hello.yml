config:
  target: 'http://localhost:3000'
  http:
    pool: 10 # All HTTP requests from all virtual users will be sent over the same 10 connections
  phases:
    - duration: 20
      arrivalCount: 200
  defaults:
    headers:
      x-my-service-auth: '987401838271002188298567'
  payload:
    path: "./ids.csv"
    fields:
      - "id"
scenarios:
  - flow:
    - loop:
      - get:
          url: "/restaurants/{{ id }}"
      count: 2000

# the loop construct to loop through a number of requests in a
# scenario. Each virtual user will send 2000 GET requests to /restaurants/id with this scenario
